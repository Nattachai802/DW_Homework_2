<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<script src="https://unpkg.com/htmx.org@1.9.2"></script>


<div
  x-data="{ count: 0 }"
  x-init="(() => {
    const ws = new WebSocket('ws://' + window.location.host + '/ws/events/');
    ws.onopen = () => {
      ws.send('fetch'); // ЁЯФ╕ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Ы trigger backend
    };
    ws.onmessage = event => {
      const data = JSON.parse(event.data);
      count = data.count ?? 0;
    };
  })()"
>
  <p>р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕лр╕Хр╕╕р╕Бр╕▓р╕гр╕Ур╣Мр╕ер╣Ир╕▓р╕кр╕╕р╕Ф: <span x-text="count">0</span></p>
</div>
